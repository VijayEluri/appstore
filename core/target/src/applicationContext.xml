<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

    <!-- ========================= GENERAL DEFINITIONS ========================= -->

    <!-- Message source for this context, loaded from localized "messages_xx" files -->
    <bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename"><value>messages</value></property>
    </bean>

    <!-- applicationContext merge-point -->
    <bean id="hibernateMappingLocations" class="org.springframework.beans.factory.config.ListFactoryBean">
        <property name="sourceList">
            <list>
                <!-- applicationContext hibernateMappingLocations merge-point -->
                <value>classpath:cn/edu/uestc/appstore/domain/User.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/Role.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/Consumer.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/PersonServProv.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/EntServProv.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/CreditDegree.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/Favorite.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/Vocation.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/UserState.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/City.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/Resouce.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/Commodity.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/ComFirstCategory.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/ComSecondCategory.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/ComQuestion.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/ComEvaluation.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/ComDegree.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/ComDownload.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/ResouceState.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/ResoucePicture.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/ResouceTest.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/ResouceAudit.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/RunEnvironment.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/ComOrder.hbm.xml</value>
                <value>classpath:cn/edu/uestc/appstore/domain/ComOrderItem.hbm.xml</value>
            </list>
         </property>
    </bean>

    <bean id="hibernateProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
        <property name="properties">
            <props>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLInnoDBDialect</prop>
                <prop key="hibernate.default_batch_fetch_size">16</prop>
                <prop key="hibernate.cache.provider_class">org.hibernate.cache.EhCacheProvider</prop>
                <prop key="hibernate.cache.query_cache_factory">org.hibernate.cache.StandardQueryCacheFactory</prop>
                <!-- applicationContext hibernateProperties merge-point -->
            </props>
        </property>
    </bean>

    <!-- Hibernate SessionFactory -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource"><ref bean="dataSource"/></property>
        <property name="mappingLocations"><ref bean="hibernateMappingLocations"/></property>
        <property name="hibernateProperties"><ref bean="hibernateProperties"/></property>
        <!-- applicationContext sessionFactory merge-point -->
    </bean>

    <!-- The Hibernate interceptor -->
    <bean id="hibernateInterceptor" class="org.springframework.orm.hibernate3.HibernateInterceptor">
        <property name="sessionFactory"><ref bean="sessionFactory"/></property>
        <!-- applicationContext hibernateInterceptor merge-point -->
    </bean>

    <!-- User Entity Proxy with inner User Entity implementation -->
    <bean id="userDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.UserDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- User entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.UserDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- Role Entity Proxy with inner Role Entity implementation -->
    <bean id="roleDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.RoleDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- Role entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.RoleDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- Consumer Entity Proxy with inner Consumer Entity implementation -->
    <bean id="consumerDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.ConsumerDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- Consumer entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.ConsumerDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- PersonServProv Entity Proxy with inner PersonServProv Entity implementation -->
    <bean id="personServProvDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.PersonServProvDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- PersonServProv entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.PersonServProvDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- EntServProv Entity Proxy with inner EntServProv Entity implementation -->
    <bean id="entServProvDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.EntServProvDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- EntServProv entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.EntServProvDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- CreditDegree Entity Proxy with inner CreditDegree Entity implementation -->
    <bean id="creditDegreeDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.CreditDegreeDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- CreditDegree entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.CreditDegreeDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- Favorite Entity Proxy with inner Favorite Entity implementation -->
    <bean id="favoriteDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.FavoriteDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- Favorite entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.FavoriteDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- Vocation Entity Proxy with inner Vocation Entity implementation -->
    <bean id="vocationDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.VocationDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- Vocation entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.VocationDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- UserState Entity Proxy with inner UserState Entity implementation -->
    <bean id="userStateDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.UserStateDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- UserState entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.UserStateDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- City Entity Proxy with inner City Entity implementation -->
    <bean id="cityDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.CityDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- City entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.CityDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- Resouce Entity Proxy with inner Resouce Entity implementation -->
    <bean id="resouceDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.ResouceDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- Resouce entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.ResouceDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- Commodity Entity Proxy with inner Commodity Entity implementation -->
    <bean id="commodityDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.CommodityDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- Commodity entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.CommodityDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- ComFirstCategory Entity Proxy with inner ComFirstCategory Entity implementation -->
    <bean id="comFirstCategoryDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.ComFirstCategoryDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- ComFirstCategory entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.ComFirstCategoryDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- ComSecondCategory Entity Proxy with inner ComSecondCategory Entity implementation -->
    <bean id="comSecondCategoryDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.ComSecondCategoryDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- ComSecondCategory entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.ComSecondCategoryDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- ComQuestion Entity Proxy with inner ComQuestion Entity implementation -->
    <bean id="comQuestionDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.ComQuestionDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- ComQuestion entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.ComQuestionDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- ComEvaluation Entity Proxy with inner ComEvaluation Entity implementation -->
    <bean id="comEvaluationDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.ComEvaluationDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- ComEvaluation entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.ComEvaluationDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- ComDegree Entity Proxy with inner ComDegree Entity implementation -->
    <bean id="comDegreeDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.ComDegreeDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- ComDegree entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.ComDegreeDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- ComDownload Entity Proxy with inner ComDownload Entity implementation -->
    <bean id="comDownloadDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.ComDownloadDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- ComDownload entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.ComDownloadDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- ResouceState Entity Proxy with inner ResouceState Entity implementation -->
    <bean id="resouceStateDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.ResouceStateDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- ResouceState entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.ResouceStateDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- ResoucePicture Entity Proxy with inner ResoucePicture Entity implementation -->
    <bean id="resoucePictureDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.ResoucePictureDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- ResoucePicture entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.ResoucePictureDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- ResouceTest Entity Proxy with inner ResouceTest Entity implementation -->
    <bean id="resouceTestDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.ResouceTestDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- ResouceTest entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.ResouceTestDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- ResouceAudit Entity Proxy with inner ResouceAudit Entity implementation -->
    <bean id="resouceAuditDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.ResouceAuditDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- ResouceAudit entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.ResouceAuditDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- RunEnvironment Entity Proxy with inner RunEnvironment Entity implementation -->
    <bean id="runEnvironmentDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.RunEnvironmentDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- RunEnvironment entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.RunEnvironmentDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- ComOrder Entity Proxy with inner ComOrder Entity implementation -->
    <bean id="comOrderDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.ComOrderDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- ComOrder entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.ComOrderDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- ComOrderItem Entity Proxy with inner ComOrderItem Entity implementation -->
    <bean id="comOrderItemDao" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.domain.ComOrderItemDaoImpl">
                <property name="sessionFactory"><ref local="sessionFactory"/></property>
                <!-- ComOrderItem entity property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.domain.ComOrderItemDao</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- ========================= Start of SERVICE DEFINITIONS ========================= -->

    <!-- Service Transactional Interceptor -->
    <bean id="serviceTransactionInterceptor" class="org.springframework.transaction.interceptor.TransactionInterceptor">
        <property name="transactionManager"><ref bean="transactionManager"/></property>
        <property name="transactionAttributeSource">
            <value>
                cn.edu.uestc.appstore.service.UserService.getAllUsers=PROPAGATION_REQUIRED
                cn.edu.uestc.appstore.service.UserService.getUser=PROPAGATION_REQUIRED
                cn.edu.uestc.appstore.service.UserService.regUser=PROPAGATION_REQUIRED
                cn.edu.uestc.appstore.service.UserService.deleteUser=PROPAGATION_REQUIRED
                cn.edu.uestc.appstore.service.UserService.updateUser=PROPAGATION_REQUIRED
                cn.edu.uestc.appstore.service.UserService.activeUser=PROPAGATION_REQUIRED
            </value>
        </property>
    <!-- applicationContext serviceTransactionInterceptor merge-point -->
    </bean>

    <!-- UserService Service Proxy with inner UserService Service Implementation -->
    <bean id="userService" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="cn.edu.uestc.appstore.service.UserServiceImpl">
                <property name="userDao"><ref bean="userDao"/></property>
                <!-- UserService service property merge-point -->
            </bean>
        </property>
        <property name="proxyInterfaces">
            <value>cn.edu.uestc.appstore.service.UserService</value>
        </property>
        <property name="interceptorNames">
            <list>
                <value>serviceTransactionInterceptor</value>
                <value>hibernateInterceptor</value>
            </list>
        </property>
    </bean>

    <!-- ========================= End of SERVICE DEFINITIONS ========================= -->

</beans>
